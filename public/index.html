<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZOOM - Premium Fashion Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Product Filters */
        .product-filters {
            padding: 1rem 5%;
            background-color: rgba(0, 0, 0, 0.9);
            margin-bottom: 2rem;
        }

        .filter-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--light);
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background-color: var(--primary);
            color: var(--dark);
            border-color: var(--primary);
        }

        @media (max-width: 768px) {
            .filter-options {
                gap: 0.3rem;
            }
            
            .filter-btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
        }

        /* Product transitions */
        .product-card {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        /* Messages */
        .no-products, .error-message {
            text-align: center;
            grid-column: 1 / -1;
            padding: 2rem;
            font-size: 1.2rem;
        }

        .error-message {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" id="ide">
        <div class="logo">
            <img src="images/logo.png" alt="ZOOM Logo">
            <p>ZOOM_Online</p>
        </div>
        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
        <ul class="nav-links" id="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#products">Shop</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="cart.html" id="cart-link"><i class="fas fa-shopping-cart"></i> Cart (0)</a></li>
            <li class="search-container">
                <button class="search-link" onclick="toggleSearch()"><i class="fa-solid fa-magnifying-glass"></i></button>
                <input type="text" class="search-input" id="searchInput" placeholder="Search..."> 
            </li>
        </ul>
    </nav>

    <!-- Hero Section with Background -->
    <div class="background-container">
        <div class="background-overlay"></div>
        <img id="background-image" src="images/hero-bg.jpg" alt="Fashion Background">
    </div>

    <header class="hero">
        <div class="hero-content">
            <h1>ZOOM</h1>
            <h2>Elevate Your Style</h2>
            <p>Discover the latest trends in fashion and express yourself with our premium collections.</p>
            <a href="#products" class="cta-button">Shop Now</a>
        </div>
    </header>

    <!-- Products Section -->
    <section id="products" class="product-section">
        <h2 class="section-title">Featured Products</h2>
        
        <!-- Product Filters -->
        <section class="product-filters">
            <div class="filter-container">
                <h3>Filter By:</h3>
                <div class="filter-options">
                    <button class="filter-btn active" data-category="all">All Products</button>
                    <button class="filter-btn" data-category="shirts">Shirts</button>
                    <button class="filter-btn" data-category="t-shirts">T-Shirts</button>
                    <button class="filter-btn" data-category="pants">Pants</button>
                    <button class="filter-btn" data-category="jeans">Jeans</button>
                    <button class="filter-btn" data-category="jackets">Jackets</button>
                    <button class="filter-btn" data-category="belts">Belts</button>
                    <button class="filter-btn" data-category="shoes">Shoes</button>
                </div>
            </div>
        </section>

        <div class="product-grid">
            <!-- Products will be loaded here dynamically -->
            <div class="loading-products">
                <div class="loading-spinner"></div>
                <p>Loading products...</p>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="contact-container">
            <h2 class="section-title">Contact Us</h2>
            <form id="contactForm" class="contact-form">
                <div class="form-group">
                    <input type="text" id="name" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <input type="email" id="email" placeholder="Your Email" required>
                </div>
                <div class="form-group">
                    <textarea id="message" rows="5" placeholder="Your Message" required></textarea>
                </div>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
        </div>
    </section>

    <!-- Back to Top Button -->
    <div class="back-to-top">
        <a href="#ide" class="back-to-top-btn"><i class="fas fa-arrow-up"></i></a>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>ZOOM Fashion</h3>
                <p>Elevating your style since 2023. Premium quality fashion for the modern individual.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#products">Shop</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Info</h3>
                <p><i class="fas fa-map-marker-alt"></i> 123 Fashion St, Style City</p>
                <p><i class="fas fa-phone"></i> (123) 456-7890</p>
                <p><i class="fas fa-envelope"></i> info@zoomfashion.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 ZOOM Fashion. All rights reserved.</p>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <script>
        // Main application script
        document.addEventListener("DOMContentLoaded", function() {
            // Mobile Menu Toggle
            const mobileMenu = document.getElementById("mobile-menu");
            const navLinks = document.getElementById("nav-links");

            if (mobileMenu && navLinks) {
                mobileMenu.addEventListener("click", function() {
                    this.classList.toggle("active");
                    navLinks.classList.toggle("active");
                });
            }

            // Initialize cart count
            updateCartCount();

            // Search Toggle
            const searchLink = document.querySelector(".search-link");
            if (searchLink) {
                searchLink.addEventListener("click", function(e) {
                    e.preventDefault();
                    toggleSearch();
                });
            }

            // Smooth Scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Back to Top Button
            const backToTopBtn = document.querySelector('.back-to-top');
            if (backToTopBtn) {
                window.addEventListener('scroll', function() {
                    if (window.pageYOffset > 300) {
                        backToTopBtn.classList.add('active');
                    } else {
                        backToTopBtn.classList.remove('active');
                    }
                });
            }

            // Initialize products and filters
            loadProducts();
            setupFilters();
        });

        // Global functions
        function toggleSearch() {
            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
                searchInput.classList.toggle("show");
                if (searchInput.classList.contains("show")) {
                    searchInput.focus();
                }
            }
        }

        function addToCart(productCard) {
            const productId = productCard.dataset.productId;
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            
            const product = {
                id: productId,
                title: productCard.querySelector(".product-title").textContent,
                price: productCard.querySelector(".product-price").textContent,
                image: productCard.querySelector(".product-image").src,
                quantity: 1
            };

            // Check if product already exists in cart
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push(product);
            }

            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();

            // Return the button for visual feedback
            return productCard.querySelector(".add-to-cart");
        }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartCount = cart.reduce((total, item) => total + (item.quantity || 1), 0);
            const cartLink = document.getElementById("cart-link");
            if (cartLink) {
                cartLink.innerHTML = `<i class="fas fa-shopping-cart"></i> Cart (${cartCount})`;
            }
        }

        function setupFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    const category = button.dataset.category;
                    filterProducts(category);
                });
            });
        }

        function filterProducts(category) {
            const productCards = document.querySelectorAll('.product-card');
            
            productCards.forEach(card => {
                const cardCategory = card.dataset.category || 'all';
                
                if (category === 'all' || cardCategory === category) {
                    card.style.display = 'block';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                } else {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        card.style.display = 'none';
                    }, 300);
                }
            });
        }

        async function loadProducts() {
            try {
                const productGrid = document.querySelector('.product-grid');
                if (!productGrid) return;
                
                // Show loading state
                productGrid.innerHTML = `
                    <div class="loading-products">
                        <div class="loading-spinner"></div>
                        <p>Loading products...</p>
                    </div>
                `;
                
                const response = await fetch('/api/products');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const products = await response.json();
                
                if (products.length === 0) {
                    productGrid.innerHTML = '<p class="no-products">No products available at the moment.</p>';
                    return;
                }
                
                // Clear and create product cards
                productGrid.innerHTML = '';
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.dataset.productId = product.id;
                    productCard.dataset.category = product.category || 'all';
                    
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.title}" class="product-image">
                        <div class="product-info">
                            <h3 class="product-title">${product.title}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-footer">
                                <span class="product-price">${product.price}Tk</span>
                                <button class="add-to-cart">Add to Cart</button>
                            </div>
                        </div>
                    `;
                    
                    productGrid.appendChild(productCard);
                });
                
                // Attach event listeners to add-to-cart buttons
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', function() {
                        const productCard = this.closest('.product-card');
                        const addToCartBtn = addToCart(productCard);
                        
                        // Visual feedback
                        const originalText = addToCartBtn.textContent;
                        addToCartBtn.textContent = "Added!";
                        addToCartBtn.style.backgroundColor = "#4CAF50";
                        
                        setTimeout(() => {
                            addToCartBtn.textContent = originalText;
                            addToCartBtn.style.backgroundColor = "";
                        }, 1000);
                    });
                });
                
            } catch (error) {
                console.error('Error loading products:', error);
                const productGrid = document.querySelector('.product-grid');
                if (productGrid) {
                    productGrid.innerHTML = `
                        <div class="error-message">
                            <p>Error loading products. Please try again later.</p>
                            <button onclick="loadProducts()">Retry</button>
                        </div>
                    `;
                }
            }
        }
    </script>
</body>
</html>